<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∫–æ–ª—å–Ω—ã–π AI –ü–æ–º–æ—â–Ω–∏–∫ ü§ñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(-45deg, #2E8B57, #90EE90, #32CD32, #228B22);
            background-size: 400% 400%;
            animation: gradientFlow 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        @keyframes gradientFlow {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(46, 139, 87, 0.3);
            width: 100%;
            max-width: 900px;
            overflow: hidden;
            border: 1px solid rgba(144, 238, 144, 0.3);
        }

        .header {
            background: linear-gradient(135deg, #228B22, #32CD32);
            padding: 30px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .chat-container {
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: linear-gradient(180deg, #F0FFF0, #E6FFE6);
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            justify-content: flex-start;
        }

        .user-message {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 20px;
            font-size: 1em;
            line-height: 1.4;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .bot-message .message-content {
            background: linear-gradient(135deg, #98FB98, #90EE90);
            color: #2F4F2F;
            border-bottom-left-radius: 5px;
            border: 1px solid rgba(50, 205, 50, 0.3);
        }

        .user-message .message-content {
            background: linear-gradient(135deg, #32CD32, #228B22);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .input-container {
            padding: 20px;
            background: rgba(240, 255, 240, 0.8);
            border-top: 1px solid rgba(144, 238, 144, 0.5);
        }

        .input-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }

        .input-box {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #90EE90;
            border-radius: 25px;
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .input-box:focus {
            border-color: #32CD32;
            box-shadow: 0 0 20px rgba(50, 205, 50, 0.3);
            transform: translateY(-2px);
        }

        .file-input-container {
            position: relative;
            display: inline-block;
        }

        .file-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-button {
            padding: 15px 20px;
            background: linear-gradient(135deg, #90EE90, #32CD32);
            color: #2F4F2F;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(50, 205, 50, 0.4);
        }

        .send-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #32CD32, #228B22);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(34, 139, 34, 0.3);
        }

        .send-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(34, 139, 34, 0.5);
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .quick-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .quick-btn {
            padding: 8px 15px;
            background: rgba(152, 251, 152, 0.7);
            border: 2px solid #90EE90;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9em;
            color: #2F4F2F;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .quick-btn:hover {
            background: #32CD32;
            color: white;
            transform: translateY(-2px);
        }

        .typing {
            display: none;
            padding: 10px 20px;
            color: #2F4F2F;
            font-style: italic;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .bot-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #32CD32, #228B22);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 4px 12px rgba(50, 205, 50, 0.4);
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }

        .image-preview {
            max-width: 200px;
            max-height: 150px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .file-name {
            font-size: 0.8em;
            color: #2F4F2F;
            margin-top: 5px;
            padding: 5px 10px;
            background: rgba(144, 238, 144, 0.3);
            border-radius: 10px;
            display: inline-block;
        }

        .loading-dots {
            display: inline-block;
        }

        .loading-dots::after {
            content: '';
            animation: loadingDots 1.5s infinite;
        }

        @keyframes loadingDots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .input-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .quick-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ –£–º–Ω—ã–π –®–∫–æ–ª—å–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫</h1>
            <p>Powered by Gemini 2.0 Flash ‚Ä¢ –†–µ—à–∞—é –∑–∞–¥–∞—á–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–∞—Ä—Ç–∏–Ω–∫–∏!</p>
        </div>
        
        <div class="chat-container">
            <div class="messages" id="messages">
                <div class="message bot-message">
                    <div class="bot-avatar">ü§ñ</div>
                    <div class="message-content">
                        –ü—Ä–∏–≤–µ—Ç! –Ø —É–º–Ω—ã–π —à–∫–æ–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ Gemini 2.0 Flash! üöÄ
                        <br><br>
                        –ú–æ–≥—É –ø–æ–º–æ—á—å —Å:
                        ‚Ä¢ –†–µ—à–µ–Ω–∏–µ–º –∑–∞–¥–∞—á –ø–æ –ª—é–±—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º üìö
                        ‚Ä¢ –ê–Ω–∞–ª–∏–∑–æ–º –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π üì∏
                        ‚Ä¢ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–º –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º üí°
                        ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–æ–π –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π ‚úÖ
                        <br><br>
                        –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É!
                    </div>
                </div>
            </div>
            
            <div class="typing" id="typing">
                <div class="bot-avatar">ü§ñ</div>
                <span class="loading-dots">–î—É–º–∞—é</span>
            </div>
            
            <div class="input-container">
                <div class="input-row">
                    <div class="file-input-container">
                        <input type="file" class="file-input" id="fileInput" accept="image/*" onchange="handleFileSelect(event)">
                        <div class="file-button">
                            üì∑ –§–æ—Ç–æ
                        </div>
                    </div>
                    <input type="text" class="input-box" id="userInput" placeholder="–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ–ø–∏—à–∏ –ø—Ä–æ–±–ª–µ–º—É..." maxlength="1000">
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
                
                <div class="quick-buttons">
                    <div class="quick-btn" onclick="quickQuestion('–†–µ—à–∏ —ç—Ç—É –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É –ø–æ—à–∞–≥–æ–≤–æ')">üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</div>
                    <div class="quick-btn" onclick="quickQuestion('–û–±—ä—è—Å–Ω–∏ —ç—Ç—É —Ç–µ–º—É –ø–æ —Ñ–∏–∑–∏–∫–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏')">‚ö° –§–∏–∑–∏–∫–∞</div>
                    <div class="quick-btn" onclick="quickQuestion('–ü–æ–º–æ–≥–∏ —Å —Ö–∏–º–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–∫—Ü–∏–µ–π')">üß™ –•–∏–º–∏—è</div>
                    <div class="quick-btn" onclick="quickQuestion('–ü—Ä–æ–≤–µ—Ä—å –º–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ')">‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –î–ó</div>
                    <div class="quick-btn" onclick="quickQuestion('–ß—Ç–æ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ?')">üì∏ –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = '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';
        const MODEL = 'google/gemini-2.0-flash-exp:free';
        let currentImage = null;

        function addMessage(content, isUser = false, imageData = null) {
            const messagesContainer = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            let imageHTML = '';
            if (imageData) {
                imageHTML = `<img src="${imageData}" alt="–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="image-preview">`;
            }
            
            messageDiv.innerHTML = `
                <div class="${isUser ? 'user-avatar' : 'bot-avatar'}">
                    ${isUser ? 'üë§' : 'ü§ñ'}
                </div>
                <div class="message-content">
                    ${imageHTML}
                    ${content}
                </div>
                ${isUser ? '<div class="user-avatar">üë§</div>' : ''}
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTyping() {
            document.getElementById('typing').style.display = 'flex';
            document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
        }

        function hideTyping() {
            document.getElementById('typing').style.display = 'none';
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const sendBtn = document.getElementById('sendBtn');
            const message = input.value.trim();
            
            if (!message && !currentImage) return;
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
            sendBtn.disabled = true;
            sendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è—é...';
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userMessage = message || '–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è';
            addMessage(userMessage, true, currentImage);
            
            input.value = '';
            showTyping();
            
            try {
                const messages = [
                    {
                        role: "system",
                        content: `–¢—ã —É–º–Ω—ã–π —à–∫–æ–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —É—á–µ–Ω–∏–∫–∞–º —Å —É—á–µ–±–æ–π. –¢—ã –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–π –∏ –æ–±—ä—è—Å–Ω—è–µ—à—å —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º. –í—Å–µ–≥–¥–∞ –¥–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –∫–∞—Ä—Ç–∏–Ω–∫—É —Å –∑–∞–¥–∞—á–µ–π, —Ä–µ—à–∞–π –µ–µ –ø–æ—à–∞–≥–æ–≤–æ. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.`
                    }
                ];

                if (currentImage) {
                    messages.push({
                        role: "user",
                        content: [
                            {
                                type: "text",
                                text: message || "–ß—Ç–æ —Ç—ã –≤–∏–¥–∏—à—å –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ? –ï—Å–ª–∏ —ç—Ç–æ —É—á–µ–±–Ω–∞—è –∑–∞–¥–∞—á–∞, –ø–æ–º–æ–≥–∏ —Ä–µ—à–∏—Ç—å –µ–µ –ø–æ—à–∞–≥–æ–≤–æ."
                            },
                            {
                                type: "image_url",
                                image_url: {
                                    url: currentImage
                                }
                            }
                        ]
                    });
                } else {
                    messages.push({
                        role: "user",
                        content: message
                    });
                }

                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': window.location.origin,
                    },
                    body: JSON.stringify({
                        model: MODEL,
                        messages: messages,
                        temperature: 0.7,
                        max_tokens: 2000,
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.choices && data.choices[0] && data.choices[0].message) {
                    const botResponse = data.choices[0].message.content;
                    hideTyping();
                    addMessage(botResponse);
                } else {
                    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç API');
                }

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞:', error);
                hideTyping();
                addMessage('–ò–∑–≤–∏–Ω–∏, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–≤–æ–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑! üòÖ');
            }
            
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –æ–±—Ä–∞—Ç–Ω–æ
            sendBtn.disabled = false;
            sendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å';
            currentImage = null;
        }

        function quickQuestion(question) {
            document.getElementById('userInput').value = question;
            sendMessage();
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentImage = e.target.result;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é
                    const fileButton = document.querySelector('.file-button');
                    fileButton.innerHTML = '‚úÖ –§–æ—Ç–æ –≤—ã–±—Ä–∞–Ω–æ';
                    fileButton.style.background = 'linear-gradient(135deg, #98FB98, #90EE90)';
                    
                    setTimeout(() => {
                        fileButton.innerHTML = 'üì∑ –§–æ—Ç–æ';
                        fileButton.style.background = '';
                    }, 2000);
                };
                reader.readAsDataURL(file);
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
        window.addEventListener('load', function() {
            document.querySelector('.container').style.animation = 'fadeIn 0.8s ease-out';
        });
    </script>
</body>
</html>
