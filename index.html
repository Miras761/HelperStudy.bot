<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Школьный AI Помощник 🤖</title>
<style>
body{font-family:sans-serif;background:#2E8B57;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;}
.container{background:#f0fff0;border-radius:20px;width:90%;max-width:800px;padding:20px;}
.messages{height:400px;overflow-y:auto;margin-bottom:10px;border:1px solid #90ee90;padding:10px;border-radius:10px;}
.message{margin-bottom:10px;}
.bot{color:#2F4F2F;background:#90ee90;padding:10px;border-radius:10px;display:inline-block;}
.user{color:white;background:#32cd32;padding:10px;border-radius:10px;display:inline-block;float:right;}
.input-row{display:flex;gap:10px;}
input[type=text]{flex:1;padding:10px;border-radius:10px;border:1px solid #32cd32;}
button{padding:10px 20px;border-radius:10px;border:none;background:#228B22;color:white;cursor:pointer;}
</style>
</head>
<body>
<div class="container">
  <div class="messages" id="messages"></div>
  <div class="input-row">
    <input type="text" id="userInput" placeholder="Напиши вопрос...">
    <button onclick="sendMessage()">Отправить</button>
  </div>
</div>

<script>
const WEBHOOK_URL = "ВАШ_WEBHOOK_URL"; // вставь сюда вебхук Make

function addMessage(text, isUser=false) {
  const msgDiv = document.createElement('div');
  msgDiv.className = 'message ' + (isUser ? 'user' : 'bot');
  msgDiv.innerText = text;
  document.getElementById('messages').appendChild(msgDiv);
  document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
}

async function sendMessage() {
  const input = document.getElementById('userInput');
  const text = input.value.trim();
  if(!text) return;
  addMessage(text, true);
  input.value = '';

  try {
    const res = await fetch(https://hook.eu2.make.com/3v71c6fgk78yf4q7hopcuou4hju8xgch, {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({text})
    });
    const data = await res.json();
    if(data.reply) addMessage(data.reply);
    else addMessage('Ошибка: нет ответа от сервера 😅');
  } catch(e) {
    console.error(e);
    addMessage('Ошибка при отправке запроса 😅');
  }
}

// Отправка по Enter
document.getElementById('userInput').addEventListener('keypress', e => {
  if(e.key === 'Enter') sendMessage();
});
</script>
</body>
</html>
